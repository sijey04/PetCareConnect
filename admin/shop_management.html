<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Management - Pet Care Connect Platform Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="bg-white text-gray-800 w-64 min-h-screen p-4 transition-all duration-300 ease-in-out transform rounded-r-3xl shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)]">
            <div class="flex items-center mb-12">
                <img src="../images/1.png" alt="Logo" class="w-180 h-70">
            </div>
            <nav>
                <a href="index-admin.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-home mr-3 w-6"></i>Dashboard
                </a>
                <a href="shop_management.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1 bg-gray-100">
                    <i class="fas fa-store mr-3 w-6"></i>Shops
                </a>
                <a href="user_management.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-users mr-3 w-6"></i>Users
                </a>
                <a href="service_management.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-briefcase mr-3 w-6"></i>Services
                </a>
                <a href="payment_management.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-credit-card mr-3 w-6"></i>Payments
                </a>
                <a href="reports_analytics.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-chart-bar mr-3 w-6"></i>Reports
                </a>
                <a href="settings.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-cog mr-3 w-6"></i>Settings
                </a>
                <a href="support.html" class="flex items-center py-2.5 px-4 rounded-xl transition duration-200 hover:bg-gray-100 mb-1">
                    <i class="fas fa-life-ring mr-3 w-6"></i>Support
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden ml-4">
            <!-- Header (same as index-admin.html) -->
            <header class="bg-white dark:bg-gray-800 shadow-md flex items-center justify-between p-4 rounded-b-2xl">
                <h2 class="text-xl font-bold">Shop Management</h2>
                <div class="flex items-center">
                    <button id="darkModeToggle" class="mr-4 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="relative">
                        <button id="profileDropdown" class="flex items-center focus:outline-none bg-gray-100 dark:bg-gray-700 p-2 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300">
                            <img class="h-8 w-8 rounded-full object-cover mr-2" src="../images/01.jpg" alt="Admin">
                            <span class="hidden md:block mr-1">Christian Jude Faminiano</span>
                            <i class="fas fa-chevron-down ml-1"></i>
                        </button>
                        <!-- Dropdown menu (hidden by default) -->
                        <div id="profileMenu" class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-xl z-10 hidden">
                            <a href="profile.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Profile</a>
                            <a href="settings.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Settings</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Logout</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Shop Management Content -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-6">
                <!-- New Shop Registrations -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6 transform hover:scale-105 transition-transform duration-300">
                    <h3 class="text-lg font-semibold mb-4">New Shop Registrations</h3>
                    <div class="overflow-x-auto rounded-xl">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-200 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left rounded-tl-xl">Shop Name</th>
                                    <th class="px-4 py-2 text-left">Owner</th>
                                    <th class="px-4 py-2 text-left">Location</th>
                                    <th class="px-4 py-2 text-left">Services</th>
                                    <th class="px-4 py-2 text-left rounded-tr-xl">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="px-4 py-2">Happy Paws</td>
                                    <td class="px-4 py-2">Jane Smith</td>
                                    <td class="px-4 py-2">Los Angeles</td>
                                    <td class="px-4 py-2">Grooming, Boarding</td>
                                    <td class="px-4 py-2">
                                        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded-lg mr-2" onclick="viewShopDetails('Happy Paws')">View</button>
                                        <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded-lg mr-2" onclick="approveShop('Happy Paws')">Approve</button>
                                        <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-lg" onclick="rejectShop('Happy Paws')">Reject</button>
                                    </td>
                                </tr>
                                <!-- Add more rows as needed -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Existing Shops Management -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6 transform hover:scale-105 transition-transform duration-300">
                    <h3 class="text-lg font-semibold mb-4">Existing Shops</h3>
                    <div class="flex mb-4">
                        <input type="text" placeholder="Search shops..." class="w-full p-2 border border-gray-300 rounded-l-xl focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <select class="p-2 border border-gray-300 rounded-r-xl focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="suspended">Suspended</option>
                        </select>
                    </div>
                    <div class="overflow-x-auto rounded-xl">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-200 dark:bg-gray-700">
                                    <th class="px-4 py-2 text-left rounded-tl-xl">Shop Name</th>
                                    <th class="px-4 py-2 text-left">Owner</th>
                                    <th class="px-4 py-2 text-left">Location</th>
                                    <th class="px-4 py-2 text-left">Status</th>
                                    <th class="px-4 py-2 text-left">Revenue</th>
                                    <th class="px-4 py-2 text-left rounded-tr-xl">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="px-4 py-2">Pawsome Grooming</td>
                                    <td class="px-4 py-2">John Doe</td>
                                    <td class="px-4 py-2">New York</td>
                                    <td class="px-4 py-2"><span class="px-2 py-1 bg-green-200 text-green-800 rounded-full text-sm">Active</span></td>
                                    <td class="px-4 py-2">â‚±70,000</td>
                                    <td class="px-4 py-2">
                                        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded-lg mr-2" onclick="editShop('Pawsome Grooming')">Edit</button>
                                        <button class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded-lg mr-2" onclick="toggleShopStatus('Pawsome Grooming', 'active')">Suspend</button>
                                        <button class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-1 px-2 rounded-lg" onclick="showShopAnalytics('Pawsome Grooming')">Analytics</button>
                                    </td>
                                </tr>
                                <!-- Add more rows as needed -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Shop Analytics Modal -->
    <div id="shopAnalyticsModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white" id="modalTitle">Shop Analytics</h3>
                <div class="mt-2 px-7 py-3">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="bg-blue-100 dark:bg-blue-900 p-4 rounded-xl">
                            <h4 class="text-blue-800 dark:text-blue-200 font-semibold">Total Revenue</h4>
                            <p class="text-2xl font-bold" id="totalRevenue">â‚±0</p>
                        </div>
                        <div class="bg-green-100 dark:bg-green-900 p-4 rounded-xl">
                            <h4 class="text-green-800 dark:text-green-200 font-semibold">Total Appointments</h4>
                            <p class="text-2xl font-bold" id="totalAppointments">0</p>
                        </div>
                        <div class="bg-yellow-100 dark:bg-yellow-900 p-4 rounded-xl">
                            <h4 class="text-yellow-800 dark:text-yellow-200 font-semibold">Average Rating</h4>
                            <p class="text-2xl font-bold" id="averageRating">0.0</p>
                        </div>
                    </div>
                    <div class="mb-4">
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <div class="mb-4">
                        <canvas id="appointmentsChart"></canvas>
                    </div>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="closeModal" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Shop Modal -->
    <div id="editShopModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white" id="editModalTitle">Edit Shop</h3>
                <div class="mt-2 px-7 py-3">
                    <form id="editShopForm">
                        <input type="text" id="editShopName" class="w-full p-2 mb-3 border border-gray-300 rounded-xl" placeholder="Shop Name">
                        <input type="text" id="editShopOwner" class="w-full p-2 mb-3 border border-gray-300 rounded-xl" placeholder="Owner Name">
                        <input type="text" id="editShopLocation" class="w-full p-2 mb-3 border border-gray-300 rounded-xl" placeholder="Location">
                        <button type="submit" class="w-full bg-blue-500 text-white p-2 rounded-xl hover:bg-blue-600">Save Changes</button>
                    </form>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="closeEditModal" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Shop Details Modal -->
    <div id="viewShopModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white" id="viewModalTitle">Shop Details</h3>
                <div class="mt-2 px-7 py-3">
                    <div id="shopDetails" class="text-left">
                        <!-- Shop details will be inserted here -->
                    </div>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="closeViewModal" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode toggle
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.documentElement.classList.toggle('dark');
        });

        // Profile dropdown toggle
        document.getElementById('profileDropdown').addEventListener('click', function() {
            document.getElementById('profileMenu').classList.toggle('hidden');
        });

        // Function to show shop analytics
        function showShopAnalytics(shopName) {
            const modal = document.getElementById('shopAnalyticsModal');
            const modalTitle = document.getElementById('modalTitle');
            modalTitle.textContent = `${shopName} Analytics`;

            // Simulated data - replace with actual API calls in a real application
            const totalRevenue = Math.floor(Math.random() * 100000) + 50000;
            const totalAppointments = Math.floor(Math.random() * 500) + 100;
            const averageRating = (Math.random() * 2 + 3).toFixed(1);

            document.getElementById('totalRevenue').textContent = `â‚±${totalRevenue.toLocaleString()}`;
            document.getElementById('totalAppointments').textContent = totalAppointments;
            document.getElementById('averageRating').textContent = averageRating;

            // Create charts
            createRevenueChart();
            createAppointmentsChart();

            modal.classList.remove('hidden');
        }

        // Function to create revenue chart
        function createRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Monthly Revenue',
                        data: [12000, 19000, 15000, 22000, 18000, 25000],
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Monthly Revenue'
                        }
                    }
                }
            });
        }

        // Function to create appointments chart
        function createAppointmentsChart() {
            const ctx = document.getElementById('appointmentsChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Appointments per Day',
                        data: [12, 19, 15, 22, 18, 25, 10],
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        borderColor: 'rgb(153, 102, 255)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Weekly Appointments'
                        }
                    }
                }
            });
        }

        // Close modal when clicking the close button
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('shopAnalyticsModal').classList.add('hidden');
        });

        // Close modal when clicking outside the modal content
        window.onclick = function(event) {
            const modal = document.getElementById('shopAnalyticsModal');
            if (event.target == modal) {
                modal.classList.add('hidden');
            }
        }

        // Function to edit shop
        function editShop(shopName) {
            const modal = document.getElementById('editShopModal');
            const modalTitle = document.getElementById('editModalTitle');
            modalTitle.textContent = `Edit ${shopName}`;

            // Pre-fill the form with shop details (replace with actual data in a real application)
            document.getElementById('editShopName').value = shopName;
            document.getElementById('editShopOwner').value = "John Doe";
            document.getElementById('editShopLocation').value = "New York";

            modal.classList.remove('hidden');
        }

        // Function to toggle shop status (suspend/activate)
        function toggleShopStatus(shopName, currentStatus) {
            const newStatus = currentStatus === 'active' ? 'suspended' : 'active';
            const action = currentStatus === 'active' ? 'suspend' : 'activate';
            if (confirm(`Are you sure you want to ${action} ${shopName}?`)) {
                // Implement status change logic here
                console.log(`${shopName} has been ${action}d`);
                // Update UI to reflect the new status
                // This is a simplified example; you'd typically update the server and then refresh the data
                const statusSpan = event.target.parentNode.parentNode.querySelector('td:nth-child(4) span');
                statusSpan.textContent = newStatus.charAt(0).toUpperCase() + newStatus.slice(1);
                statusSpan.className = newStatus === 'active' 
                    ? 'px-2 py-1 bg-green-200 text-green-800 rounded-full text-sm'
                    : 'px-2 py-1 bg-red-200 text-red-800 rounded-full text-sm';
                event.target.textContent = newStatus === 'active' ? 'Suspend' : 'Activate';
            }
        }

        // Close edit modal when clicking the close button
        document.getElementById('closeEditModal').addEventListener('click', function() {
            document.getElementById('editShopModal').classList.add('hidden');
        });

        // Handle edit shop form submission
        document.getElementById('editShopForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const shopName = document.getElementById('editShopName').value;
            const shopOwner = document.getElementById('editShopOwner').value;
            const shopLocation = document.getElementById('editShopLocation').value;
            
            // Implement update logic here
            console.log(`Updating shop: ${shopName}, Owner: ${shopOwner}, Location: ${shopLocation}`);
            
            // Close the modal after submission
            document.getElementById('editShopModal').classList.add('hidden');
        });

        // Close modals when clicking outside the modal content
        window.onclick = function(event) {
            const analyticsModal = document.getElementById('shopAnalyticsModal');
            const editModal = document.getElementById('editShopModal');
            if (event.target == analyticsModal) {
                analyticsModal.classList.add('hidden');
            }
            if (event.target == editModal) {
                editModal.classList.add('hidden');
            }
        }

        // Function to view shop details
        function viewShopDetails(shopName) {
            const modal = document.getElementById('viewShopModal');
            const modalTitle = document.getElementById('viewModalTitle');
            const shopDetails = document.getElementById('shopDetails');
            
            modalTitle.textContent = `${shopName} Details`;
            
            // Simulated shop details - replace with actual data in a real application
            shopDetails.innerHTML = `
                <p><strong>Shop Name:</strong> ${shopName}</p>
                <p><strong>Owner:</strong> Jane Smith</p>
                <p><strong>Location:</strong> Los Angeles</p>
                <p><strong>Services:</strong> Grooming, Boarding</p>
                <p><strong>Description:</strong> A cozy pet care center offering premium grooming and boarding services.</p>
            `;
            
            modal.classList.remove('hidden');
        }

        // Function to approve shop
        function approveShop(shopName) {
            if (confirm(`Are you sure you want to approve ${shopName}?`)) {
                // Implement approval logic here
                console.log(`${shopName} has been approved`);
                // You would typically send this to your backend and then update the UI
                alert(`${shopName} has been approved successfully!`);
                // Optionally, remove the row from the table or update its status
            }
        }

        // Function to reject shop
        function rejectShop(shopName) {
            if (confirm(`Are you sure you want to reject ${shopName}?`)) {
                // Implement rejection logic here
                console.log(`${shopName} has been rejected`);
                // You would typically send this to your backend and then update the UI
                alert(`${shopName} has been rejected.`);
                // Optionally, remove the row from the table or update its status
            }
        }

        // Close view modal when clicking the close button
        document.getElementById('closeViewModal').addEventListener('click', function() {
            document.getElementById('viewShopModal').classList.add('hidden');
        });

        // Update the window.onclick function to include the new modal
        window.onclick = function(event) {
            const analyticsModal = document.getElementById('shopAnalyticsModal');
            const editModal = document.getElementById('editShopModal');
            const viewModal = document.getElementById('viewShopModal');
            if (event.target == analyticsModal) {
                analyticsModal.classList.add('hidden');
            }
            if (event.target == editModal) {
                editModal.classList.add('hidden');
            }
            if (event.target == viewModal) {
                viewModal.classList.add('hidden');
            }
        }
    </script>
</body>
</html>